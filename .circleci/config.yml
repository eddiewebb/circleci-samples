jobs:
  e2e-tests:
    executor: node/default
    steps:
    - {run: echo "boop"}
  module-a-build:
    executor: node/default
    parameters:
      is_conditional: {default: '', description: This exists only to hack the absence
          of conditional jobs., type: string}
    steps:
    - {run: echo "beep"}
  module-a-publish:
    executor: node/default
    steps:
    - {run: echo "boop"}
  module-a-test:
    executor: node/default
    steps:
    - {run: echo "beep"}
  module-b-build:
    executor: node/default
    parameters:
      is_conditional: {default: '', description: This exists only to hack the absence
          of conditional jobs., type: string}
    steps:
    - {run: echo "boop"}
  module-b-publish:
    executor: node/default
    steps:
    - {run: echo "boop"}
  module-b-test:
    executor: node/default
    steps:
    - {run: echo "boop"}
orbs: {node: circleci/node@4.7.0}
version: 2.1
workflows:
  the-workflow:
    jobs:
    - module-a-build:
        filters: &id001
          branches:
            only: [___THIS_JOB_FILTERED_BY_MONO_ORB___]
    - module-a-test:
        requires: [module-a-build]
    - module-b-build: {}
    - module-b-test:
        requires: [module-b-build]
    - e2e-tests:
        requires: [module-a-test, module-b-test]
    - module-a-publish:
        filters: *id001
        requires: [e2e-tests, module-a-test]
    - module-b-publish:
        requires: [e2e-tests, module-b-test]

